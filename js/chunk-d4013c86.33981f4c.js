(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4013c86"],{"57fc":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{total:t.total,layout:t.layout,background:t.background,"current-page":t.currentPage,"page-size":t.pageSize},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange}})],1)},a=[],s=(i("c5f6"),{props:{total:{type:Number,default:0},layout:{type:String,default:"total, prev, pager, next"},page:{type:Number,default:1},background:{type:Boolean,default:!0}},data:function(){return{pageSize:10}},computed:{currentPage:{set:function(t){this.$emit("update:page",t)},get:function(){return this.page}}},methods:{handleCurrentChange:function(){this.$emit("change",this.currentPage)}}}),c=s,o=(i("f44c"),i("2877")),r=Object(o["a"])(c,n,a,!1,null,"6f22950f",null);e["a"]=r.exports},"642c":function(t,e,i){},8648:function(t,e,i){},"92fb":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"notice m-center"},[i("ul",{staticClass:"notice-nav"},t._l(t.navList,function(e,n){return i("li",{key:e.code,staticClass:"nav-item",class:{active:t.currentNavIndex==n},on:{click:function(i){return t.handleNavClick(e,n)}}},[t._v("\n      "+t._s(e.title)+"\n    ")])}),0),i("div",{staticClass:"notice-list"},[i("div",{staticClass:"list-setting"},[i("span",{staticClass:"tips"},[t._v("消息中心只展示最近三个月的消息")]),i("span",{staticClass:"setting-box"},[i("span",{staticClass:"read-all",on:{click:t.handleAllReadClick}},[t._v("全部标记为已读")]),i("span",{staticClass:"read-setting",on:{click:t.handleSettingClick}},[t._v("通知设置")])])]),i("ul",t._l(t.noticeList,function(e,n){return i("li",{key:n,ref:"NoticeList",refInFor:!0,staticClass:"list-item",class:{ready:e.isRead}},[i("div",{staticClass:"item-icon"},[t._v("\n          "+t._s(1==e.code?"实战":"系统")+"\n        ")]),i("div",{staticClass:"item-content"},[i("p",{staticClass:"title",on:{click:function(i){return t.handleNoticeClick(e,n)}}},[t._v("\n            "+t._s(e.title)+"\n          ")]),i("p",{staticClass:"time"},[t._v("\n            "+t._s(e.time)+"\n          ")]),i("span",{staticClass:"iconfont delete",on:{click:function(i){return i.stopPropagation(),t.handleDeleteClick(e,n)}}},[t._v("")])])])}),0)]),i("pagination",{attrs:{total:t.total,page:t.page},on:{"update:page":function(e){t.page=e},change:t.handlePaginationChange}}),i("notice-setting",{attrs:{list:t.settingList,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}})],1)},a=[],s=(i("ac6a"),i("57fc")),c=i("da71"),o=i("a27e");function r(t){return o["a"].get("/mock/notice/list".concat(c["c"]?"":".json"),{params:t})}function u(t){return o["a"].post("/mock/notice/read",t)}function l(t){return o["a"].post("/mock/notice/delete",t)}function d(t){return o["a"].post("/mock/notice/read/all",t)}function g(){return o["a"].get("/mock/notice/setting.json")}var f={data:function(){return{total:0,page:1,dialogVisible:!1,settingList:[],noticeList:[],currentNavIndex:0,navList:[]}},created:function(){this.isDev=!1,this.navList=[{title:"全部",code:0},{title:"实战",code:1},{title:"系统",code:2}]},mounted:function(){this.getNoticeListData()},methods:{handleNavClick:function(t,e){this.page=1,this.currentNavIndex=e,this.getNoticeListData()},handleDeleteClick:function(t,e){var i=this;if(this.isDev){var n={id:t.id};l(n).then(function(t){var e=t.code,n=t.msg;if(e!==c["b"])return i.$message.error(n),!1;i.$message.success("删除成功"),i.getNoticeListData()}).catch(function(){i.$message.error("删除失败")})}else{clearTimeout(this.timer);var a=this.$refs.NoticeList[e];a.style.height=0,a.style.opacity=0,this.timer=setTimeout(function(){a.style.display="none",i.noticeList.splice(e,1),i.$message.success("删除成功")},300)}},handleNoticeClick:function(t,e){var i=this;if(this.isDev){var n={id:t.id};u(n).then(function(t){var e=t.code,n=t.msg;if(e!==c["b"])return i.$message.error(n),!1;i.$message.success("消息已读成功"),i.getNoticeListData()}).catch(function(){i.$message.error("消息已读失败")})}else t.isRead=!0,this.$set(this.noticeList,e,t)},handleAllReadClick:function(){var t=this;if(this.isDev){var e={code:this.currentCode};d(e).then(function(e){var i=e.code,n=e.msg;if(i!==c["b"])return t.$message.error(n),!1;t.$message.success("全部标记成功"),t.getNoticeListData()}).catch(function(){t.$message.error("全部标记失败")})}else this.noticeList.forEach(function(e,i){e.code!==t.currentCode&&t.currentCode||(e.isRead=!0,t.$set(t.noticeList,i,e))}),this.$message.success("全部标记成功")},handleSettingClick:function(){this.dialogVisible=!0,this.getNoticeSettingData()},handlePaginationChange:function(t){this.page=t},getNoticeListData:function(){var t=this,e={page:this.page,code:this.currentCode};r(e).then(function(e){t.noticeList=[],t.total=0;var i=e.code,n=e.data;i===c["b"]&&(t.noticeList=n.list,t.total=n.total)}).catch(function(){t.noticeList=[],t.total=0})},getNoticeSettingData:function(){var t=this;g().then(function(e){t.settingList=[];var i=e.code,n=e.data;i===c["b"]&&(t.settingList=n)}).catch(function(){t.settingList=[]})}},computed:{currentCode:function(){return this.navList[this.currentNavIndex].code||""}},components:{Pagination:s["a"],NoticeSetting:function(){return i.e("chunk-8dd24c52").then(i.bind(null,"5655"))}},beforeDestroy:function(){clearTimeout(this.timer)}},h=f,p=(i("e4cb"),i("2877")),v=Object(p["a"])(h,n,a,!1,null,"26cee789",null);e["default"]=v.exports},e4cb:function(t,e,i){"use strict";var n=i("642c"),a=i.n(n);a.a},f44c:function(t,e,i){"use strict";var n=i("8648"),a=i.n(n);a.a}}]);
//# sourceMappingURL=chunk-d4013c86.33981f4c.js.map