{"version":3,"sources":["webpack:///./src/components/pagination/pagination.vue?8638","webpack:///src/components/pagination/pagination.vue","webpack:///./src/components/pagination/pagination.vue?0976","webpack:///./src/components/pagination/pagination.vue","webpack:///./src/pages/notice/index.vue?dd9a","webpack:///./src/api/notice.js","webpack:///src/pages/notice/index.vue","webpack:///./src/pages/notice/index.vue?4b63","webpack:///./src/pages/notice/index.vue","webpack:///./src/pages/notice/index.vue?5787","webpack:///./src/components/pagination/pagination.vue?ca64"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","total","layout","background","current-page","currentPage","page-size","pageSize","on","update:currentPage","$event","update:current-page","current-change","handleCurrentChange","staticRenderFns","paginationvue_type_script_lang_js_","props","type","Number","default","String","page","Boolean","data","computed","set","val","$emit","get","methods","pagination_paginationvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_l","nav","index","key","code","class","active","currentNavIndex","click","handleNavClick","_v","_s","title","handleAllReadClick","handleSettingClick","item","ref","refInFor","ready","isRead","handleNoticeClick","time","stopPropagation","handleDeleteClick","update:page","change","handlePaginationChange","list","settingList","visible","dialogVisible","update:visible","getNoticeList","params","axios","concat","IS_MOCK","noticeReadOne","post","noticeNoticeDelete","noticeReadAll","getNoticeSetting","noticevue_type_script_lang_js_","noticeList","navList","created","isDev","mounted","getNoticeListData","_this","id","then","res","msg","config","$message","error","success","catch","clearTimeout","timer","currentDeleteItem","$refs","NoticeList","style","height","opacity","setTimeout","display","splice","_this2","$set","_this3","currentCode","forEach","getNoticeSettingData","_this4","_this5","components","Pagination","pagination","NoticeSetting","__webpack_require__","e","bind","beforeDestroy","pages_noticevue_type_script_lang_js_","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_26cee789_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_26cee789_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_pagination_vue_vue_type_style_index_0_id_6f22950f_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_pagination_vue_vue_type_style_index_0_id_6f22950f_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"kHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,wBAAmC,CAAAF,EAAA,iBAAsBG,MAAA,CAAOC,MAAAR,EAAAQ,MAAAC,OAAAT,EAAAS,OAAAC,WAAAV,EAAAU,WAAAC,eAAAX,EAAAY,YAAAC,YAAAb,EAAAc,UAA0HC,GAAA,CAAKC,qBAAA,SAAAC,GAAsCjB,EAAAY,YAAAK,GAAuBC,sBAAA,SAAAD,GAAwCjB,EAAAY,YAAAK,GAAuBE,iBAAAnB,EAAAoB,wBAA2C,IAChdC,EAAA,GCYAC,aAAA,CACAC,MAAA,CACAf,MAAA,CACAgB,KAAAC,OACAC,QAAA,GAEAjB,OAAA,CACAe,KAAAG,OACAD,QAAA,4BAEAE,KAAA,CACAJ,KAAAC,OACAC,QAAA,GAEAhB,WAAA,CACAc,KAAAK,QACAH,SAAA,IAGAI,KAnBA,WAoBA,OACAhB,SAAA,KAGAiB,SAAA,CACAnB,YAAA,CACAoB,IADA,SACAC,GACAhC,KAAAiC,MAAA,cAAAD,IAEAE,IAJA,WAKA,OAAAlC,KAAA2B,QAIAQ,QAAA,CAEAhB,oBAFA,WAGAnB,KAAAiC,MAAA,SAAAjC,KAAAW,iBClDmWyB,EAAA,0BCQnWC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAtC,EACAsB,GACF,EACA,KACA,WACA,MAIeoB,EAAA,KAAAH,sGCnBf,IAAAvC,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,mBAA8B,CAAAF,EAAA,MAAWE,YAAA,cAAyBN,EAAA0C,GAAA1C,EAAA,iBAAA2C,EAAAC,GAA0C,OAAAxC,EAAA,MAAgByC,IAAAF,EAAAG,KAAAxC,YAAA,WAAAyC,MAAA,CAA2CC,OAAAhD,EAAAiD,iBAAAL,GAAqC7B,GAAA,CAAKmC,MAAA,SAAAjC,GAAyB,OAAAjB,EAAAmD,eAAAR,EAAAC,MAAwC,CAAA5C,EAAAoD,GAAA,WAAApD,EAAAqD,GAAAV,EAAAW,OAAA,cAAkD,GAAAlD,EAAA,OAAeE,YAAA,eAA0B,CAAAF,EAAA,OAAYE,YAAA,gBAA2B,CAAAF,EAAA,QAAaE,YAAA,QAAmB,CAAAN,EAAAoD,GAAA,qBAAAhD,EAAA,QAAyCE,YAAA,eAA0B,CAAAF,EAAA,QAAaE,YAAA,WAAAS,GAAA,CAA2BmC,MAAAlD,EAAAuD,qBAAgC,CAAAvD,EAAAoD,GAAA,aAAAhD,EAAA,QAAiCE,YAAA,eAAAS,GAAA,CAA+BmC,MAAAlD,EAAAwD,qBAAgC,CAAAxD,EAAAoD,GAAA,cAAAhD,EAAA,KAAAJ,EAAA0C,GAAA1C,EAAA,oBAAAyD,EAAAb,GAA4E,OAAAxC,EAAA,MAAgByC,IAAAD,EAAAc,IAAA,aAAAC,UAAA,EAAArD,YAAA,YAAAyC,MAAA,CAAwEa,MAAAH,EAAAI,SAAoB,CAAAzD,EAAA,OAAYE,YAAA,aAAwB,CAAAN,EAAAoD,GAAA,eAAApD,EAAAqD,GAAA,GAAAI,EAAAX,KAAA,2BAAA1C,EAAA,OAAuFE,YAAA,gBAA2B,CAAAF,EAAA,KAAUE,YAAA,QAAAS,GAAA,CAAwBmC,MAAA,SAAAjC,GAAyB,OAAAjB,EAAA8D,kBAAAL,EAAAb,MAA4C,CAAA5C,EAAAoD,GAAA,iBAAApD,EAAAqD,GAAAI,EAAAH,OAAA,kBAAAlD,EAAA,KAAuEE,YAAA,QAAmB,CAAAN,EAAAoD,GAAA,iBAAApD,EAAAqD,GAAAI,EAAAM,MAAA,kBAAA3D,EAAA,QAAyEE,YAAA,kBAAAS,GAAA,CAAkCmC,MAAA,SAAAjC,GAAkD,OAAzBA,EAAA+C,kBAAyBhE,EAAAiE,kBAAAR,EAAAb,MAA4C,CAAA5C,EAAAoD,GAAA,aAAoB,KAAAhD,EAAA,cAAwBG,MAAA,CAAOC,MAAAR,EAAAQ,MAAAoB,KAAA5B,EAAA4B,MAAkCb,GAAA,CAAKmD,cAAA,SAAAjD,GAA+BjB,EAAA4B,KAAAX,GAAgBkD,OAAAnE,EAAAoE,0BAAsChE,EAAA,kBAAuBG,MAAA,CAAO8D,KAAArE,EAAAsE,YAAAC,QAAAvE,EAAAwE,eAAmDzD,GAAA,CAAK0D,iBAAA,SAAAxD,GAAkCjB,EAAAwE,cAAAvD,OAA2B,IACnyDI,EAAA,mDCGO,SAASqD,EAAeC,GAC7B,OAAOC,OAAMzC,IAAN,oBAAA0C,OAA+BC,OAAU,GAAK,SAAY,CAC/DH,OAAQA,IAKL,SAASI,EAAejD,GAC7B,OAAO8C,OAAMI,KAAK,oBAAqBlD,GAIlC,SAASmD,EAAoBnD,GAClC,OAAO8C,OAAMI,KAAK,sBAAuBlD,GAIpC,SAASoD,EAAepD,GAC7B,OAAO8C,OAAMI,KAAK,wBAAyBlD,GAItC,SAASqD,IACd,OAAOP,OAAMzC,IAAI,6BCgCnB,IAAAiD,EAAA,CACAtD,KADA,WAEA,OACAtB,MAAA,EACAoB,KAAA,EACA4C,eAAA,EACAF,YAAA,GACAe,WAAA,GACApC,gBAAA,EACAqC,QAAA,KAGAC,QAZA,WAaAtF,KAAAuF,OAAA,EACAvF,KAAAqF,QAAA,CACA,CAAAhC,MAAA,KAAAR,KAAA,GACA,CAAAQ,MAAA,KAAAR,KAAA,GACA,CAAAQ,MAAA,KAAAR,KAAA,KAGA2C,QApBA,WAqBAxF,KAAAyF,qBAEAtD,QAAA,CAEAe,eAFA,SAEAR,EAAAC,GACA3C,KAAA2B,KAAA,EACA3B,KAAAgD,gBAAAL,EACA3C,KAAAyF,qBAGAzB,kBARA,SAQAR,EAAAb,GAAA,IAAA+C,EAAA1F,KAEA,GAAAA,KAAAuF,MAAA,CACA,IAAA1D,EAAA,CACA8D,GAAAnC,EAAAmC,IAEAX,EAAAnD,GAAA+D,KAAA,SAAAC,GAAA,IACAhD,EAAAgD,EAAAhD,KAAAiD,EAAAD,EAAAC,IACA,GAAAjD,IAAAkD,EAAA,KAEA,OADAL,EAAAM,SAAAC,MAAAH,IACA,EAEAJ,EAAAM,SAAAE,QAAA,QACAR,EAAAD,sBACAU,MAAA,WACAT,EAAAM,SAAAC,MAAA,cAEA,CACAG,aAAApG,KAAAqG,OACA,IAAAC,EAAAtG,KAAAuG,MAAAC,WAAA7D,GACA2D,EAAAG,MAAAC,OAAA,EACAJ,EAAAG,MAAAE,QAAA,EACA3G,KAAAqG,MAAAO,WAAA,WACAN,EAAAG,MAAAI,QAAA,OACAnB,EAAAN,WAAA0B,OAAAnE,EAAA,GACA+C,EAAAM,SAAAE,QAAA,SACA,OAIArC,kBAtCA,SAsCAL,EAAAb,GAAA,IAAAoE,EAAA/G,KAEA,GAAAA,KAAAuF,MAAA,CACA,IAAA1D,EAAA,CACA8D,GAAAnC,EAAAmC,IAEAb,EAAAjD,GAAA+D,KAAA,SAAAC,GAAA,IACAhD,EAAAgD,EAAAhD,KAAAiD,EAAAD,EAAAC,IACA,GAAAjD,IAAAkD,EAAA,KAEA,OADAgB,EAAAf,SAAAC,MAAAH,IACA,EAEAiB,EAAAf,SAAAE,QAAA,UACAa,EAAAtB,sBACAU,MAAA,WACAY,EAAAf,SAAAC,MAAA,iBAGAzC,EAAAI,QAAA,EACA5D,KAAAgH,KAAAhH,KAAAoF,WAAAzC,EAAAa,IAIAF,mBA7DA,WA6DA,IAAA2D,EAAAjH,KAEA,GAAAA,KAAAuF,MAAA,CACA,IAAA1D,EAAA,CACAgB,KAAA7C,KAAAkH,aAEAjC,EAAApD,GAAA+D,KAAA,SAAAC,GAAA,IACAhD,EAAAgD,EAAAhD,KAAAiD,EAAAD,EAAAC,IACA,GAAAjD,IAAAkD,EAAA,KAEA,OADAkB,EAAAjB,SAAAC,MAAAH,IACA,EAEAmB,EAAAjB,SAAAE,QAAA,UACAe,EAAAxB,sBACAU,MAAA,WACAc,EAAAjB,SAAAC,MAAA,iBAGAjG,KAAAoF,WAAA+B,QAAA,SAAA3D,EAAAb,GACAa,EAAAX,OAAAoE,EAAAC,aAAAD,EAAAC,cACA1D,EAAAI,QAAA,EACAqD,EAAAD,KAAAC,EAAA7B,WAAAzC,EAAAa,MAGAxD,KAAAgG,SAAAE,QAAA,WAIA3C,mBAzFA,WA0FAvD,KAAAuE,eAAA,EACAvE,KAAAoH,wBAGAjD,uBA9FA,SA8FAxC,GACA3B,KAAA2B,QAOA8D,kBAtGA,WAsGA,IAAA4B,EAAArH,KACA0E,EAAA,CACA/C,KAAA3B,KAAA2B,KACAkB,KAAA7C,KAAAkH,aAEAzC,EAAAC,GAAAkB,KAAA,SAAAC,GACAwB,EAAAjC,WAAA,GACAiC,EAAA9G,MAAA,EAFA,IAGAsC,EAAAgD,EAAAhD,KAAAhB,EAAAgE,EAAAhE,KACAgB,IAAAkD,EAAA,OACAsB,EAAAjC,WAAAvD,EAAAuC,KACAiD,EAAA9G,MAAAsB,EAAAtB,SAEA4F,MAAA,WACAkB,EAAAjC,WAAA,GACAiC,EAAA9G,MAAA,KAIA6G,qBAzHA,WAyHA,IAAAE,EAAAtH,KACAkF,IAAAU,KAAA,SAAAC,GACAyB,EAAAjD,YAAA,GADA,IAEAxB,EAAAgD,EAAAhD,KAAAhB,EAAAgE,EAAAhE,KACAgB,IAAAkD,EAAA,OACAuB,EAAAjD,YAAAxC,KAEAsE,MAAA,WACAmB,EAAAjD,YAAA,OAIAvC,SAAA,CACAoF,YADA,WAEA,OAAAlH,KAAAqF,QAAArF,KAAAgD,iBAAAH,MAAA,KAGA0E,WAAA,CACAC,WAAAC,EAAA,KACAC,cAAA,kBAAAC,EAAAC,EAAA,kBAAAhC,KAAA+B,EAAAE,KAAA,gBAEAC,cArKA,WAsKA1B,aAAApG,KAAAqG,SCjO8V0B,EAAA,0BCQ9V1F,EAAgBC,OAAAC,EAAA,KAAAD,CACdyF,EACAjI,EACAsB,GACF,EACA,KACA,WACA,MAIeoB,EAAA,WAAAH,6CCnBf,IAAA2F,EAAAL,EAAA,QAAAM,EAAAN,EAAAO,EAAAF,GAAyjBC,EAAG,qCCA5jB,IAAAE,EAAAR,EAAA,QAAAS,EAAAT,EAAAO,EAAAC,GAA8jBC,EAAG","file":"js/chunk-d4013c86.33981f4c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pagination-container\"},[_c('el-pagination',{attrs:{\"total\":_vm.total,\"layout\":_vm.layout,\"background\":_vm.background,\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"current-change\":_vm.handleCurrentChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"pagination-container\">\r\n    <el-pagination\r\n      :total=\"total\"\r\n      :layout=\"layout\"\r\n      :background=\"background\"\r\n      :current-page.sync=\"currentPage\"\r\n      :page-size=\"pageSize\"\r\n      @current-change=\"handleCurrentChange\"\r\n    />\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: {\r\n    total: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    layout: {\r\n      type: String,\r\n      default: 'total, prev, pager, next'\r\n    },\r\n    page: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    background: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      pageSize: 10\r\n    }\r\n  },\r\n  computed: {\r\n    currentPage: {\r\n      set (val) {\r\n        this.$emit('update:page', val)\r\n      },\r\n      get () {\r\n        return this.page\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 页码变动\r\n    handleCurrentChange () {\r\n      this.$emit('change', this.currentPage)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  .pagination-container\r\n    padding: 30px 16px;\r\n    >>> .el-pagination\r\n      text-align: center;\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pagination.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pagination.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./pagination.vue?vue&type=template&id=6f22950f&scoped=true&\"\nimport script from \"./pagination.vue?vue&type=script&lang=js&\"\nexport * from \"./pagination.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pagination.vue?vue&type=style&index=0&id=6f22950f&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f22950f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"notice m-center\"},[_c('ul',{staticClass:\"notice-nav\"},_vm._l((_vm.navList),function(nav,index){return _c('li',{key:nav.code,staticClass:\"nav-item\",class:{active: _vm.currentNavIndex == index},on:{\"click\":function($event){return _vm.handleNavClick(nav, index)}}},[_vm._v(\"\\n      \"+_vm._s(nav.title)+\"\\n    \")])}),0),_c('div',{staticClass:\"notice-list\"},[_c('div',{staticClass:\"list-setting\"},[_c('span',{staticClass:\"tips\"},[_vm._v(\"消息中心只展示最近三个月的消息\")]),_c('span',{staticClass:\"setting-box\"},[_c('span',{staticClass:\"read-all\",on:{\"click\":_vm.handleAllReadClick}},[_vm._v(\"全部标记为已读\")]),_c('span',{staticClass:\"read-setting\",on:{\"click\":_vm.handleSettingClick}},[_vm._v(\"通知设置\")])])]),_c('ul',_vm._l((_vm.noticeList),function(item,index){return _c('li',{key:index,ref:\"NoticeList\",refInFor:true,staticClass:\"list-item\",class:{ready: item.isRead}},[_c('div',{staticClass:\"item-icon\"},[_vm._v(\"\\n          \"+_vm._s(item.code == 1 ? '实战' : '系统')+\"\\n        \")]),_c('div',{staticClass:\"item-content\"},[_c('p',{staticClass:\"title\",on:{\"click\":function($event){return _vm.handleNoticeClick(item, index)}}},[_vm._v(\"\\n            \"+_vm._s(item.title)+\"\\n          \")]),_c('p',{staticClass:\"time\"},[_vm._v(\"\\n            \"+_vm._s(item.time)+\"\\n          \")]),_c('span',{staticClass:\"iconfont delete\",on:{\"click\":function($event){$event.stopPropagation();return _vm.handleDeleteClick(item, index)}}},[_vm._v(\"\")])])])}),0)]),_c('pagination',{attrs:{\"total\":_vm.total,\"page\":_vm.page},on:{\"update:page\":function($event){_vm.page=$event},\"change\":_vm.handlePaginationChange}}),_c('notice-setting',{attrs:{\"list\":_vm.settingList,\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'utils/axios.js'\r\nimport { IS_MOCK } from './config.js'\r\n\r\n// 分页获取中心列表\r\nexport function getNoticeList (params) {\r\n  return axios.get(`/mock/notice/list${ IS_MOCK ? '' : '.json' }`, {\r\n    params: params\r\n  })\r\n}\r\n\r\n// 单个消息已读\r\nexport function noticeReadOne (data) {\r\n  return axios.post('/mock/notice/read', data)\r\n}\r\n\r\n// 单个消息删除\r\nexport function noticeNoticeDelete (data) {\r\n  return axios.post('/mock/notice/delete', data)\r\n}\r\n\r\n// 全部消息已读\r\nexport function noticeReadAll (data) {\r\n  return axios.post('/mock/notice/read/all', data)\r\n}\r\n\r\n// 获取消息中心设置\r\nexport function getNoticeSetting () {\r\n  return axios.get('/mock/notice/setting.json')\r\n}","<template>\r\n  <div class=\"notice m-center\">\r\n    <!-- nav -->\r\n    <ul class=\"notice-nav\">\r\n      <li\r\n        v-for=\"(nav,index) in navList\"\r\n        :key=\"nav.code\"\r\n        class=\"nav-item\"\r\n        :class=\"{active: currentNavIndex == index}\"\r\n        @click=\"handleNavClick(nav, index)\"\r\n      >\r\n        {{ nav.title }}\r\n      </li>\r\n    </ul>\r\n\r\n    <!-- list -->\r\n    <div class=\"notice-list\">\r\n      <div class=\"list-setting\">\r\n        <span class=\"tips\">消息中心只展示最近三个月的消息</span>\r\n        <span class=\"setting-box\">\r\n          <span class=\"read-all\" @click=\"handleAllReadClick\">全部标记为已读</span>\r\n          <span class=\"read-setting\" @click=\"handleSettingClick\">通知设置</span>\r\n        </span>\r\n      </div>\r\n      <ul>\r\n        <li\r\n          v-for=\"(item,index) in noticeList\"\r\n          :key=\"index\"\r\n          ref=\"NoticeList\"\r\n          class=\"list-item\"\r\n          :class=\"{ready: item.isRead}\"\r\n        >\r\n          <div class=\"item-icon\">\r\n            {{ item.code == 1 ? '实战' : '系统' }}\r\n          </div>\r\n          <div class=\"item-content\">\r\n            <p class=\"title\" @click=\"handleNoticeClick(item, index)\">\r\n              {{ item.title }}\r\n            </p>\r\n            <p class=\"time\">\r\n              {{ item.time }}\r\n            </p>\r\n            <span class=\"iconfont delete\" @click.stop=\"handleDeleteClick(item, index)\">&#xe622;</span>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n\r\n    <!-- pagination -->\r\n    <pagination :total=\"total\" :page.sync=\"page\" @change=\"handlePaginationChange\" />\r\n\r\n    <!-- dialog -->\r\n    <notice-setting :list=\"settingList\" :visible.sync=\"dialogVisible\"></notice-setting>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Pagination from 'components/pagination/pagination.vue'\r\nimport { ERR_OK } from 'api/config.js'\r\nimport { getNoticeList, getNoticeSetting, noticeReadOne, noticeReadAll, noticeNoticeDelete } from 'api/notice.js'\r\nexport default {\r\n  data () {\r\n    return {\r\n      total: 0,             // 总数\r\n      page: 1,              // 当前页\r\n      dialogVisible: false, // 是否显示消息中心弹窗\r\n      settingList: [],      // 设置数据\r\n      noticeList: [],       // 消息中心列表 \r\n      currentNavIndex: 0,   // 当前导航的索引\r\n      navList: []           // 导航数据\r\n    }\r\n  },\r\n  created () {\r\n    this.isDev = process.env.NODE_ENV === 'development',\r\n    this.navList = [\r\n      { title: '全部', code: 0 },\r\n      { title: '实战', code: 1 },\r\n      { title: '系统', code: 2 }\r\n    ]\r\n  },\r\n  mounted () {\r\n    this.getNoticeListData()\r\n  },\r\n  methods: {\r\n    // 选项卡切换\r\n    handleNavClick (nav, index) {\r\n      this.page = 1\r\n      this.currentNavIndex = index\r\n      this.getNoticeListData()\r\n    },\r\n    // 单个通知删除\r\n    handleDeleteClick (item, index) {\r\n      // 本地开发环境下才请求接口\r\n      if (this.isDev) {\r\n        const data = {\r\n          id: item.id\r\n        }\r\n        noticeNoticeDelete(data).then(res => {\r\n          const { code, msg } = res\r\n          if (code !== ERR_OK) {\r\n            this.$message.error(msg)\r\n            return false\r\n          }\r\n          this.$message.success('删除成功')\r\n          this.getNoticeListData()\r\n        }).catch(() => {\r\n          this.$message.error('删除失败')\r\n        })\r\n      } else {\r\n        clearTimeout(this.timer)\r\n        let currentDeleteItem = this.$refs.NoticeList[index]\r\n        currentDeleteItem.style.height = 0\r\n        currentDeleteItem.style.opacity = 0\r\n        this.timer = setTimeout(() => {\r\n          currentDeleteItem.style.display = 'none'\r\n          this.noticeList.splice(index, 1)\r\n          this.$message.success('删除成功')\r\n        }, 300)\r\n      }\r\n    },\r\n    // 单个通知已读\r\n    handleNoticeClick (item, index) {\r\n      // 本地开发环境下才请求接口\r\n      if (this.isDev) {\r\n        const data = {\r\n          id: item.id\r\n        }\r\n        noticeReadOne(data).then(res => {\r\n          const { code, msg } = res\r\n          if (code !== ERR_OK) {\r\n            this.$message.error(msg)\r\n            return false\r\n          }\r\n          this.$message.success('消息已读成功')\r\n          this.getNoticeListData()\r\n        }).catch(() => {\r\n          this.$message.error('消息已读失败')\r\n        })\r\n      } else {\r\n        item.isRead = true\r\n        this.$set(this.noticeList, index, item)\r\n      }\r\n    },\r\n    // 全部标记已读\r\n    handleAllReadClick () {\r\n      // 本地开发环境才请求接口\r\n      if (this.isDev) {\r\n        const data = {\r\n          code: this.currentCode\r\n        }\r\n        noticeReadAll(data).then(res => {\r\n          const { code, msg } = res\r\n          if (code !== ERR_OK) {\r\n            this.$message.error(msg)\r\n            return false\r\n          }\r\n          this.$message.success('全部标记成功')\r\n          this.getNoticeListData()\r\n        }).catch(() => {\r\n          this.$message.error('全部标记失败')\r\n        })\r\n      } else {\r\n        this.noticeList.forEach((item, index) => {\r\n          if (item.code === this.currentCode || !this.currentCode) {\r\n            item.isRead = true\r\n            this.$set(this.noticeList, index, item)\r\n          }\r\n        })\r\n        this.$message.success('全部标记成功')\r\n      }\r\n    },\r\n    // 通知设置点击\r\n    handleSettingClick () {\r\n      this.dialogVisible = true\r\n      this.getNoticeSettingData()\r\n    },\r\n    // 分页值更新\r\n    handlePaginationChange (page) {\r\n      this.page = page\r\n      // 本地开发环境下才有分页\r\n      if (process.env.NODE_ENV === 'development') {\r\n        this.getNoticeListData()\r\n      }\r\n    },\r\n    // 获取通知列表数据\r\n    getNoticeListData () {\r\n      const params = {\r\n        page: this.page,\r\n        code: this.currentCode\r\n      }\r\n      getNoticeList(params).then(res => {\r\n        this.noticeList = []\r\n        this.total = 0\r\n        let { code, data } = res\r\n        if (code === ERR_OK) {\r\n          this.noticeList = data.list\r\n          this.total = data.total\r\n        }\r\n      }).catch(() => {\r\n        this.noticeList = []\r\n        this.total = 0\r\n      })\r\n    },\r\n    // 获取通知设置数据\r\n    getNoticeSettingData () {\r\n      getNoticeSetting().then(res => {\r\n        this.settingList = []\r\n        let { code, data } = res\r\n        if (code === ERR_OK) {\r\n          this.settingList = data\r\n        }\r\n      }).catch(() => {\r\n        this.settingList = []\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    currentCode () {\r\n      return this.navList[this.currentNavIndex].code || ''\r\n    }\r\n  },\r\n  components: {\r\n    Pagination,\r\n    NoticeSetting: () => import('./notice-setting.vue')\r\n  },\r\n  beforeDestroy () {\r\n    clearTimeout(this.timer)\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  @import '~assets/stylus/variables.styl';\r\n  @import '~assets/stylus/mixin.styl';\r\n  .notice\r\n    margin-top: 30px;\r\n    .notice-nav\r\n      padding-left: 32px;\r\n      .nav-item\r\n        display: inline-block;\r\n        margin-right: 58px;\r\n        height: 60px;\r\n        line-height: 60px;\r\n        cursor: pointer;\r\n        &.active\r\n          color: $theme-red-color;\r\n          border-bottom: 2px solid $theme-red-color;\r\n    .notice-list\r\n      .list-setting\r\n        padding-left: 28px;\r\n        padding-right: 20px;\r\n        height: 50px;\r\n        line-height: 50px;\r\n        border-top: 1px solid $border-first-color;\r\n        background-color: #f3f5f7;\r\n        color: $font-four-color;\r\n        font-size: 14px;\r\n        .setting-box\r\n          float: right;\r\n          & > span\r\n            margin-left: 20px;\r\n            color: $font-second-color;\r\n            cursor: pointer;\r\n            &:hover\r\n              color: $font-first-color;\r\n      .list-item\r\n        padding: 20px 10px;\r\n        display: flex;\r\n        align-items: flex-start;\r\n        height: 90px;\r\n        border-bottom: 1px solid $border-second-color;\r\n        box-sizing: border-box;\r\n        transition: all 0.3s linear;\r\n        opacity: 1;\r\n        &.ready\r\n          .item-icon\r\n            border: 1px solid $border-second-color;\r\n            background-color: #fff;\r\n            color: $font-four-color;\r\n          .item-content\r\n            .title\r\n              color: $font-four-color;\r\n        .item-icon\r\n          margin-right: 20px;\r\n          padding: 10px;\r\n          border: 1px solid $theme-red-color;\r\n          background-color: #fde7e5;\r\n          color: $theme-red-color;\r\n          font-size: 14px;\r\n        .item-content\r\n          flex: 1;\r\n          position: relative;\r\n          &:hover\r\n            .delete\r\n              display: block;\r\n          & > p\r\n            line-height: 24px;\r\n            &.title\r\n              font-size: 16px;\r\n              font-weight: 700;\r\n              color: $font-second-color;\r\n              cursor: pointer;\r\n              ellipsis();\r\n            &.time\r\n              font-size: 14px;\r\n              color: $font-four-color;\r\n          .delete\r\n            display: none;\r\n            position: absolute;\r\n            top: 0px;\r\n            right: 20px;\r\n            color: $font-four-color;\r\n            cursor: pointer;\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=26cee789&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=26cee789&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26cee789\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=26cee789&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=26cee789&lang=stylus&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pagination.vue?vue&type=style&index=0&id=6f22950f&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pagination.vue?vue&type=style&index=0&id=6f22950f&lang=stylus&scoped=true&\""],"sourceRoot":""}